<?php 

 interface Ifieldset{
 	public function fetch($row);
 	public function format();
    public function reset(bool $useDefault = false);
 	public function listCaption();
 	public function listDetail();
 	public function displayDetail();
	public function read();
	public function write();
	public function remove();
	public function setEnvironment(string $env = 'POST');
	public function setEntity(string $entity);
 }
 /*
 ^_currentUser set to $_SESSION['login-name']
 °_currentTimestamp set to $sessionTime

 _fieldsetEntity
 ****
 id, name, description
 created°, updated°, highlight

 _fieldsetEntityType 
  id, name, description
 created°, updated°, highlight
 ****
 displayOrder, notes

 _fieldsetEntityChild
  id, name, description
 created°, updated°, highlight
 *****
 parentEntity, typeEntity

 _fieldsetProjectChild
   id, name, description
 created°, updated°, highlight
 parentEntity, typeEntity
 ****
 project, projectType, location
 started°, approved,approvedBy^

 _fieldsetTaskChild
 id, name, description
 created°, updated°, highlight
 parentEntity, typeEntity
 project, projectType, location
 started°, approved,approvedBy^
****
 task, taskType, reported°,doneBy^
 notes, linkUrl, linkText

 _fieldsetActivityChild
 id, name, description
 created°, updated°, highlight
 parentEntity, typeEntity
 project, projectType, location
 started°, approved,approvedBy^
 task, taskType, reported°,doneBy^
 notes, linkUrl, linkText
 ****
 activity, activityType
 */

abstract class _fieldset extends _contentWriter 
implements Ifieldset, Iecho, IcontentWriter{
	protected $_entity = 'fieldset';
	protected $_currentTimestamp = '';
	protected $_currentUser = '';
	protected $_fields = array();
	
	public function __construct(){
		global $sessionTime;
		$this->_currentTimestamp = $sessionTime;
		$this->_currentUserName = $_SESSION['login-name'];
	}
	protected function _register(string $fieldName, Ifield $field){
		$this->_fields[$fieldName] = $field;
	}
	
	abstract public function setDefaults();
	
    public function reset(bool $useDefault = false){
    	foreach ($this->_fields as $f){
			$f->reset($useDefault);
		}
    }
    public function setEntity(string $entity){
    	foreach ($this->_fields as $f){
			$f->setEntity($entity);
		}
		
    }
    public function setEnvironment(string $env = 'POST'){
    	foreach ($this->_fields as $f){
			$f->setEnvironment($env);
		}
		
    }
	public function fetch($row){
	    foreach ($this->_fields as $f){
			$f->fetch($row);
		}
	}
	
	public function format(){
		foreach ($this->_fields as $f){
			$f->format();
		}
	}
	
	public function displayDetail(){
		foreach ($this->_fields as $f){
			$this->addContent($f->displayDetail());
		}
		return $this->getContent();
	}
	
	public function listCaption(){
		foreach ($this->_fields as $f){
			$this->addContent($f->listCaption());
		}
		return $this->getContent();
	}
	public function listDetail(){
		foreach ($this->_fields as $f){
			$this->addContent($f->listDetail());
		}
		return $this->getContent();
	}
	public function read(){
		foreach ($this->_fields as $f){
			$f->read();
		}
	}
	public function write(){
		foreach ($this->_fields as $f){
			$f->write();
		}
	}
	public function remove(){
		foreach ($this->_fields as $f){
			$f->remove();
		}
	}
	public function echoFieldState(){
	
	
	}
}



?>
