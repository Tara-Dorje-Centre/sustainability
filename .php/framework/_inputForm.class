<?php 

class _inputSection extends _contentWriter{
public $sectionName = '';
public function __construct(string $sectionName){
$this->sectionNae = $sectionName;
}

}

class _inputForm extends _contentWriter{
	public $entity;
	public $mode;
	public $url;

	public $required;
	public $optional;
	public $hidden;
	public $submit;

	public function __construct(string $entity,string $mode, string $url){
		$this->entity = $entity;
		$this->mode = $mode;
		$this->url = $url;


		$this->required = new _inputSection('required');
		$this->optional = new _inputSection('optional');
		$this->hidden = new _inputSection('hidden');
		$this->submit = new _inputSection('submit');
	}

	public function open(string $contextMenu = '',string $titleEntity = ''){
		$legend = $this->mode.':  '.$titleEntity;
		$form = openEditForm($this->entity,$legend,$this->url, $contextMenu);
		$this->addContent($form);
	}
	public function close(){
	
		$this->required->addContent($this->hidden->getContent());
		
		$optional = $this->optional->getContent();
		$required = $this->required->getContent();
		$submit = $this->submit->getContent();
	
		$this->addContent(closeEditForm($entity,$required,$optional,$submit));
		return $this->getContent();
	}
	function openEditForm($entityName, $legend, $formAction, $contextMenu = NULL){
	$form = openDisplayDetails($entityName,$legend,NULL,'Edit',$contextMenu);
	$form .= openForm($entityName.'-editForm',$formAction,'editForm');
	//$form .= '<pre>';
	$form .= openDiv($entityName.'-fields','editing-fields');
	return $form;
}


function closeEditForm($entity = '', $required = NULL, $optional = NULL, $submit = NULL){

	$form = wrapDivRequired($entity, $required);
		
	$form .= wrapDivOptional($entity,$optional);
		
	$form .= wrapDivSubmit($entity,$submit);

	//close fields div
	$form .= closeDiv();
	
	//close edit form
	
		//$form .= '</pre>';
	$form .= closeForm();
	
	$form .= closeDisplayDetails();
	return $form;
}
	

function wrapDivRequired($entity,$formRequired){
	$div = openDiv('formRequired','show');
	$div .= $formRequired.closeDiv();
	return $div;
}

function wrapDivOptional($entity,$formOptional){
	$div = openDiv('formOptional','hide');
	$div .= $formOptional.closeDiv();
	return $div;
}

function wrapDivFieldGrouping($entity,$fields,$css = 'fieldGrouping'){
	$div = openDiv($entity.'-'.$css,$css);
	$div .= $fields.closeDiv();
	return $div;
}

function wrapDivSubmit($entity,$formSubmit){
	$div = openDiv('formSubmit','formSubmit');
	$div .= $formSubmit.closeDiv();
	return $div;
}


function openForm($idName, $action, $css = 'none'){
	$e = new _form($action, $idName, $css);
	return $e->open();
}

function closeForm(){
	$e = new _form();
	return $e->close();
}

}


 
?>
