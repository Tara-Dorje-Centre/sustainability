<?php
namespace html;



function inputFieldTimestamp($entity, $id, $value, $caption = '',$disabled = 'false'){
	$input = getTimestampSelect($id,$value,$disabled);
	$element = captionedInput($caption,$input);		
	return $element;
}

function getYearSelect($selectName,$selectedYear,$currentYear,$tooltip = 'Year'){
	$minYear = $currentYear - 7;
	$maxYear = $currentYear + 4;
	$years = getSelectRange($maxYear,$selectedYear,4,$minYear);
	$options = getSelectList($selectName, $years,$tooltip,'false',null,'editing-input-date');	
	return $options;	
}

function getMonthSelect($selectName,$selectedMonth,$tooltip = 'Month'){
	$months = getSelectRange(12,$selectedMonth,2);
	$options = getSelectList($selectName, $months,$tooltip,'false',null,'editing-input-date');		
	return $options;
}

function getDaySelect($selectName,$selectedDay,$tooltip = 'Day'){
	$days = getSelectRange(31,$selectedDay,2);
	$options = getSelectList($selectName, $days,$tooltip,'false',null,'editing-input-date');		
	return $options;
}

function getHourSelect($selectName,$selectedHour,$tooltip = 'Hour'){
	$hours = getSelectRange(23,$selectedHour,2,-1);
	$options = getSelectList($selectName,$hours,$tooltip,'false',null,'editing-input-time');		
	return $options;
}

function getMinuteSelect($selectName,$selectedMinute,$tooltip = 'Minutes'){
	$mins = getSelectRange(59,$selectedMinute,2,-1);
	$options = getSelectList($selectName,$mins,$tooltip,'false',null,'editing-input-time');		
	return $options;
}

function getTimestampPart_Year($timestamp){
	$part = substr($timestamp,0,4);
	return $part;
}

function getTimestampSelect($selectName,$time, $disabled = 'false'){
	//timestamp format 
	//0000-00-00 00:00:00
	//0123456789012345678
	//0000-55-88-11-44-77
	$year = getTimestampPart_Year($time);
	$month = substr($time,5,2);
	$day = substr($time,8,2);
	$hour = substr($time,11,2);
	$min = substr($time,14,2);

	global $sessionTime;
	$currentYear = getTimestampPart_Year($sessionTime);

	$select = getYearSelect($selectName.'_YYYY',$year,$currentYear);
	$select .= getMonthSelect($selectName.'_MM',$month);
	$select .= getDaySelect($selectName.'_DD',$day);
	$select .= getHourSelect($selectName.'_HH',$hour);
	$select .= getMinuteSelect($selectName.'_mm',$min);
	return $select;
}

function getTimestampDate($timestamp){
	$date = substr($timestamp,0,10);
	return $date;	
}

function getTimestampMonth($timestamp,$trim = 'NO'){
	$month = substr($timestamp,5,2);
	if ($trim != 'NO'){
		$month = ltrim($month,'0');
	}
	return $month;	
}

function getTimestampYear($timestamp){
	return getTimestampPart_Year($timestamp);
}

function getTimestampDay($timestamp,$trim = 'NO'){
	$day = substr($timestamp,8,2);
	if ($trim != 'NO'){
		$day = ltrim($day,'0');
	}
	return $day;
}
function getTimestampValues($selectName){
	$year = $_POST[$selectName.'_YYYY'];
	$month = $_POST[$selectName.'_MM'];
	$day = $_POST[$selectName.'_DD'];
	$hour = $_POST[$selectName.'_HH'];
	$min = $_POST[$selectName.'_mm'];
	$time = $year.'-'.$month.'-'.$day.' '.$hour.':'.$min.':00';
	return $time;
} 
function getTimestampPostValues($selectName){
	$year = $_POST[$selectName.'_YYYY'];
	$month = $_POST[$selectName.'_MM'];
	$day = $_POST[$selectName.'_DD'];
	$hour = $_POST[$selectName.'_HH'];
	$min = $_POST[$selectName.'_mm'];
	$time = $year.'-'.$month.'-'.$day.' '.$hour.':'.$min.':00';
	return $time;
} 
?>
