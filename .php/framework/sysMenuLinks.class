<?php

class sysMenuLinks extends _linkMenu {
	public function __construct($name = 'menu'){
		parent::__construct($name,'LIST','menu');
	}
	public function getDetailLink($displayMode = 'MY_LINKS',$caption = 'MyLinks', $year = 0, $month = 0){
		$url = $this->makeUrl($displayMode, $year, $month);
		$l = new \html\_link($url,$caption);
		return $l;	
	}
	public function logout(){
		$url = 'sys_Logout.php';
		$l = new \html\_link($url,'Logout');
		return $l;
		
	}
	public function makeUrl(string $displayMode, $year = 0, $month = 0){
		$baseUrl = 'sys_Menu.php';
		$u = new _url($baseUrl);
		$u->makeParameter('context', 'system-menu');
		$u->makeParameter('scope', 'view');
		$u->makeParameter('display-mode', $displayMode);
		if ($year != 0 && $month != 0){
			$u->makeParameter('year',$year);
			$u->makeParameter('month',$month);
		}
		return $u;
	}
	
	public function reference(){	
		return $this->detailLink('REFERENCE', 'Reference');		
	}
	public function modules(){	
		return $this->detailLink('MODULES', 'Main');		
	}
	public function myLinks(){	
		return $this->detailLink('MY_LINKS', 'My Links');		
	}
	public function updates(){
		return $this->detailLink('SYSTEM-UPDATES', 'System Updates');
	}
	public function testing(){
		return $this->detailLink('TESTING', 'Testing');
	}
	public function calendar(){
		return $this->detailLink('CALENDAR', 'Calendars');
	}
	public function getPageMenu(){
		//$this->initialize('section-heading-links','LIST','menu');
		
		$this->addLink($this->modules());
		$this->addLink($this->reference());
		$this->addLink($this->myLinks());
		$this->addLink($this->calendar());
		
		if ($_SESSION['is-admin'] == 'yes'){
			$this->addLink($this->updates());
			$this->addLink($this->testing());
		}
		return $this->print();			
	}
}
?>
