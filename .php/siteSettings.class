<?php 

class siteSettingsFields extends _entityFields{
	 public $siteTitle = 'MyProjects';
	 public $siteUrl = 'MyUrl';
	 public $loginNotice = '';
	 public $organizationUrl = 'MyOrganizationUrl';	
	 public $organization = 'MyOrganization';
	 public $organizationDescription = 'AboutMyOrganization';
	 public $contactName = 'MySiteContact';
	 public $contactEmail = 'MySiteContact@MyOrganization';
	 public $showPublicSite = 'no';
	 public $showCostReports = 'no';
	 public $showRevenueReports = 'no';
	 public $publicFillColor;
	 public $publicSiteColor;
	 public $publicPageColor;
	 public $publicMenuColor;
	 public $publicMenuColorHover;
	 public $publicTextColor;
	 public $publicTextColorHover;			
	 public $publicFontFamily;
	 public $publicFontSizeTitle;
	 public $publicfontSizeHeading;
	 public $publicFontSizeMenu;
	 public $publicFontSizeText;
	 
	


	public function __construct(){

parent::__construct();

	 $this->siteTitle = new _textField('site_title','siteTitle');
	 $this->siteUrl = new _textField('site_url','siteUrl');
	 $this->loginNotice = new _textField('login_notice','loginNotice');
	 $this->organizationUrl = new _textField('organization_url','organizationUrl');
	 $this->organization = new _textField('organization','organization');
	 $this->organizationDescription = new _textField('organization_description','organizationDescription');
	 $this->contactName = new _textField('contact_name','contactName');
	 $this->contactEmail = new _textField('contact_email','contactEmail');
	 $this->showPublicSite = new _textField('show_public_site','showPublicSite');
	 $this->showCostReports = new _textField('show_cost_reports','showCostReports');
	 $this->showRevenueReports = new _textField('show_revenue_reports','showRevenueReports');
	 $this->publicFillColor = new _textField('public_fill_color','publicFillColor');
	 $this->publicSiteColor = new _textField('public_site_color','publicSiteColor');
	 $this->publicPageColor = new _textField('public_page_color','publicPageColor');
	 $this->publicMenuColor = new _textField('public_menu_color','publicMenuColor');
	 $this->publicMenuColorHover = new _textField('public_menu_color_hover','publicMenuColorHover');
	 $this->publicTextColor = new _textField('public_text_color','publicTextColor');
	 $this->publicTextColorHover = new _textField('public_text_color_hover','publicTextColorHover');
	 $this->publicFontFamily = new _textField('public_font_family','publicFontFamily');
	 $this->publicFontSizeTitle = new _numberField('public_font_size_title','publicFontSizeTitle');
	 $this->publicFontSizeHeading = new _textField('public_font_size_heading','publicfontSizeHeading');
	 $this->publicFontSizeMenu = new _textField('public_font_size_menu','publicFontSizeMenu');
	 $this->publicFontSizeText = new _textField('public_font_size_text','publicFontSizeText');
	 
	 	$this->siteTitle->setShow('Projects Title');
		 $this->name->set($this->siteTitle->value);
		 $this->siteUrl->setShow('Projects URL');
		 $this->loginNotice->setShow('Login Notice');
		 $this->organization->setShow('Organization');
		 $this->organizationUrl->setShow('Organization URL');
		 $this->organizationDescription->setShow('Organization Description');
		 $this->contactName->setShow('Contact');
		 $this->contactEmail->setShow('Contact Email');
	 
	 
	}
	
	public function setRow($row){
		parent::setRow($row);
		
		 $this->siteTitle->setRow($row);
		 $this->name->set($this->siteTitle->value);
		 $this->siteUrl->setRow($row);
		 $this->loginNotice->setRow($row);
		 $this->organization->setRow($row);
		 $this->organizationUrl->setRow($row);
		 $this->organizationDescription->setRow($row);
		 $this->contactName->setRow($row);
		 $this->contactEmail->setRow($row);
		 $this->showPublicSite->setRow($row);
		 $this->showCostReports->setRow($row);
		 $this->showRevenueReports->setRow($row);
		 $this->publicFillColor->setRow($row);
		 $this->publicSiteColor->setRow($row);
		 $this->publicPageColor->setRow($row);
		 $this->publicMenuColor->setRow($row);
		 $this->publicMenuColorHover->setRow($row);
		 $this->publicTextColor->setRow($row);
		 $this->publicTextColorHover->setRow($row);
		 $this->publicFontFamily->setRow($row);
		 $this->publicFontSizeTitle->setRow($row);
		 $this->publicFontSizeHeading->setRow($row);
		 $this->publicFontSizeMenu->setRow($row);
		 $this->publicFontSizeText->setRow($row);
		
	}
	
	public function defaults(){
		parent::defaults();
		
		
		
	}
	
	public function format(){
		parent::format();
		
		 $this->siteTitle->format();
		 $this->name->set($this->siteTitle->value);
		 $this->siteUrl->format();
		 $this->loginNotice->format();
		 $this->organization->format();
		 $this->organizationUrl->format();
		 $this->organizationDescription->format();
		 $this->contactName->format();
		 $this->contactEmail->format();
		 $this->showPublicSite->format();
		 $this->showCostReports->format();
		 $this->showRevenueReports->format();
		 $this->publicFillColor->format();
		 $this->publicSiteColor->format();
		 $this->publicPageColor->format();
		 $this->publicMenuColor->format();
		 $this->publicMenuColorHover->format();
		 $this->publicTextColor->format();
		 $this->publicTextColorHover->format();
		 $this->publicFontFamily->format();
		 $this->publicFontSizeTitle->format();
		 $this->publicFontSizeHeading->format();
		 $this->publicFontSizeMenu->format();
		 $this->publicFontSizeText->format();
	}
	
	public function listHeading(){
		$this->addContent(parent::listHeading(),true);
		

		 $this->addContent($this->siteTitle->tH());
		 $this->addContent($this->siteUrl->tH());
		 $this->addContent($this->loginNotice->tH());
		 $this->addContent($this->organization->tH());
		 $this->addContent($this->organizationUrl->tH());
		 $this->addContent($this->organizationDescription->tH());
		 $this->addContent($this->contactName->tH());
		 $this->addContent($this->contactEmail->tH());
		 $this->addContent($this->showPublicSite->tH());
		 $this->addContent($this->showCostReports->tH());
		 $this->addContent($this->showRevenueReports->tH());
		 $this->addContent($this->publicFillColor->tH());
		 $this->addContent($this->publicSiteColor->tH());
		 $this->addContent($this->publicPageColor->tH());
		 $this->addContent($this->publicMenuColor->tH());
		 $this->addContent($this->publicMenuColorHover->tH());
		 $this->addContent($this->publicTextColor->tH());
		 $this->addContent($this->publicTextColorHover->tH());
		 $this->addContent($this->publicFontFamily->tH());
		 $this->addContent($this->publicFontSizeTitle->tH());
		 $this->addContent($this->publicFontSizeHeading->tH());
		 $this->addContent($this->publicFontSizeMenu->tH());
		 $this->addContent($this->publicFontSizeText->tH());
		
		
		return $this->getContent();
	}
	
	public function listDetail(){
		$this->addContent(parent::listDetail(),true);
		
		 $this->addContent($this->siteTitle->tD());
		 $this->addContent($this->siteUrl->tD());
		 $this->addContent($this->loginNotice->tD());
		 $this->addContent($this->organization->tD());
		 $this->addContent($this->organizationUrl->tD());
		 $this->addContent($this->organizationDescription->tD());
		 $this->addContent($this->contactName->tD());
		 $this->addContent($this->contactEmail->tD());
		 $this->addContent($this->showPublicSite->tD());
		 $this->addContent($this->showCostReports->tD());
		 $this->addContent($this->showRevenueReports->tD());
		 $this->addContent($this->publicFillColor->tD());
		 $this->addContent($this->publicSiteColor->tD());
		 $this->addContent($this->publicPageColor->tD());
		 $this->addContent($this->publicMenuColor->tD());
		 $this->addContent($this->publicMenuColorHover->tD());
		 $this->addContent($this->publicTextColor->tD());
		 $this->addContent($this->publicTextColorHover->tD());
		 $this->addContent($this->publicFontFamily->tD());
		 $this->addContent($this->publicFontSizeTitle->tD());
		 $this->addContent($this->publicFontSizeHeading->tD());
		 $this->addContent($this->publicFontSizeMenu->tD());
		 $this->addContent($this->publicFontSizeText->tD());

		return $this->getContent();
	}
	
	public function display(){
		$this->addContent(parent::display(),true);
		
		 $this->addContent($this->siteTitle->p());
		 $this->addContent($this->siteUrl->p());
		 $this->addContent($this->loginNotice->p());
		 $this->addContent($this->organization->p());
		 $this->addContent($this->organizationUrl->p());
		 $this->addContent($this->organizationDescription->p());
		 $this->addContent($this->contactName->p());
		 $this->addContent($this->contactEmail->p());
		 $this->addContent($this->showPublicSite->p());
		 $this->addContent($this->showCostReports->p());
		 $this->addContent($this->showRevenueReports->p());
		 $this->addContent($this->publicFillColor->p());
		 $this->addContent($this->publicSiteColor->p());
		 $this->addContent($this->publicPageColor->p());
		 $this->addContent($this->publicMenuColor->p());
		 $this->addContent($this->publicMenuColorHover->p());
		 $this->addContent($this->publicTextColor->p());
		 $this->addContent($this->publicTextColorHover->p());
		 $this->addContent($this->publicFontFamily->p());
		 $this->addContent($this->publicFontSizeTitle->p());
		 $this->addContent($this->publicFontSizeHeading->p());
		 $this->addContent($this->publicFontSizeMenu->p());
		 $this->addContent($this->publicFontSizeText->p());
		
		
		return $this->getContent();
	}
	
	public function getPostVars(){
		parent::getPostVars();
		
		 $this->siteTitle->post();
		 $this->name->set($this->siteTitle->value);
		 $this->siteUrl->post();
		 $this->loginNotice->post();
		 $this->organization->post();
		 $this->organizationUrl->post();
		 $this->organizationDescription->post();
		 $this->contactName->post();
		 $this->contactEmail->post();
		 $this->showPublicSite->post();
		 $this->showCostReports->post();
		 $this->showRevenueReports->post();
		 $this->publicFillColor->post();
		 $this->publicSiteColor->post();
		 $this->publicPageColor->post();
		 $this->publicMenuColor->post();
		 $this->publicMenuColorHover->post();
		 $this->publicTextColor->post();
		 $this->publicTextColorHover->post();
		 $this->publicFontFamily->post();
		 $this->publicFontSizeTitle->post();
		 $this->publicFontSizeHeading->post();
		 $this->publicFontSizeMenu->post();
		 $this->publicFontSizeText->post();
	}
}

class siteSettings extends _entity{
	protected $__MyClassName = 'SiteSettings';
	protected $_titleEntity = 'Site Settings';

	protected function setHelperClasses(){
		$this->f = new siteSettingsFields();
		$this->links = new siteSettingsLinks();
		$this->sql = new siteSettingsSQL();
	}
	
	protected function beforeSetDetails(){
			$this->verifySettings();
	}
    
	protected function afterSetDetails(){
		$this->setSessionDetails();	
	}
	
	protected function verifySettings(){
		$sql = $this->sql->count();
		
		$i = dbGetCount($sql, 'count_settings', 0, 'verifySettings');
		if ($i == 0){
			$this->createSettings();	
		}
	}
	
	protected function afterSetDefaults(){
	
	}
	
	protected function setSessionDetails(){
	//if format happens on setting details for edit
		if (($this->pageMode != 'EDIT') || ($this->pageMode != 'ADD')){
		$this->f->format();
		}
		$_SESSION['site-title'] = $this->f->siteTitle->value;	
		$_SESSION['site-url'] = $this->f->siteUrl->value;	
		$_SESSION['site-login-notice'] = displayLines($this->f->loginNotice->value);
		$_SESSION['site-org'] = $this->f->organization->value;	
		$_SESSION['site-org-url'] = $this->f->organizationUrl;
		$_SESSION['site-contact-name'] = $this->f->contactName->value;	
		$_SESSION['site-contact-email'] = $this->f->contactEmail->value;	
		$_SESSION['show-public-site'] = $this->f->showPublicSite->value;	
		$_SESSION['show-cost-reports'] = $this->f->showCostReports->value;	
		$_SESSION['show-revenue-reports'] = $this->f->showRevenueReports->value;	
	}
	
	protected function unsetSessionDetails(){
		unset($_SESSION['site-title']);
		unset($_SESSION['site-url']);
		unset($_SESSION['site-login-notice']);
		unset($_SESSION['site-org']);
		unset($_SESSION['site-org-url']);
		unset($_SESSION['site-contact-name']);
		unset($_SESSION['site-contact-email']);
		unset($_SESSION['show-public-site']);
		unset($_SESSION['show-cost-reports']);
		unset($_SESSION['show-revenue-reports']);
	}
	
	protected function setPageMenu(){
		$menuType = 'LIST';
		$menuStyle = 'menu';		
		$settingsL = new SiteSettingsLinks($menuType,$menuStyle);
		$menuL = new MenuLinks($menuType,$menuStyle);

		$menu = $settingsL->openMenu('section-heading-links');
		
		$menu .= $menuL->linkReference();
		$menu .= $settingsL->resetMenu();
		if ($this->pageMode == 'VIEW'){
			$menu .= $settingsL->detailEditHref();
		} elseif ($this->pageMode == 'EDIT'){
			$menu .= $settingsL->detailViewHref();
		}
		$menu .= $settingsL->closeMenu();
		$this->_pageMenu = $menu;
	}
	
	protected function afterDisplay(){
		$detail = $this->getPublicSiteStylesFieldset('true');
		return $detail;
	}
	
	private function getPublicSiteStylesFieldset($disabled = 'false'){

		$styles = openFieldset('Public Site Presentation Styles');
		$styles .= openDiv('public-styles','editing-table');
		$input = getColorSelectList($this->f->publicFillColor->value, 'publicFillColor',$disabled);
		$styles .= captionedInput('Fill Color', $input);		

		$input = getColorSelectList($this->f->publicSiteColor->value,'publicSiteColor',$disabled);
		$styles .= captionedInput('Site Color', $input);		

		$input = getColorSelectList($this->f->publicPageColor->value, 'publicPageColor',$disabled);
		$styles .= captionedInput('Page Color', $input);		

		$input = getColorSelectList($this->f->publicMenuColor->value, 'publicMenuColor',$disabled);
		$styles .= captionedInput('Menu Color', $input);		

		$input = getColorSelectList($this->f->publicMenuColorHover->value, 'publicMenuColorHover',$disabled);
		$styles .= captionedInput('Menu Color Hover', $input);		

		$input = getColorSelectList($this->f->publicTextColor->value, 'publicTextColor',$disabled);
		$styles .= captionedInput('Text Color', $input);		

		$input = getColorSelectList($this->f->publicTextColorHover->value, 'publicTextColorHover',$disabled);
		$styles .= captionedInput('Text Color Menu Hover', $input);		
		
		$input = getFontSizeSelectList($this->f->publicFontSizeTitle->value, 'publicFontSizeTitle',$disabled);
		$styles .= captionedInput('Font Size Title px', $input);	

		$input = getFontSizeSelectList($this->f->publicFontSizeHeading->value, 'publicFontSizeHeading',$disabled);
		$styles .= captionedInput('Font Size Heading px', $input);	
		
		$input = getFontSizeSelectList($this->f->publicFontSizeMenu->value, 'publicFontSizeMenu',$disabled);
		$styles .= captionedInput('Font Size Menu px', $input);	
		
			
		$input = getFontSizeSelectList($this->f->publicFontSizeText->value, 'publicFontSizeText',$disabled);
		$styles .= captionedInput('Font Size Text px', $input);	

		$input = getFontFamilySelectList($this->f->publicFontFamily->value, 'publicFontFamily',$disabled);
		$styles .= captionedInput('FontFamily', $input);	
			
		//add the sample region after the first color select
		$styles .= wrapDiv($this->publicSiteSample(),'public-site-sample','site-sample');

		$styles .= closeDiv();
		$styles .= closeFieldset();
		return $styles;
	}
	
	public function publicSiteSample(){
		
		
		//sample is inserted into the editing td just after the first color select list
		//force a close on the td and reopen a td with rowspan set to all seven selects
		//this inserts the sample neatly beside all select lists
		
		$td = new _td();
		$x = $td->close();
		
		$td = new _td('none','editing-td');
		$td->addAttribute('width', '50%');
		$td->addAttribute('rowspan',11);
		$x .= $td->open();
		
		$style = minHeightPixels(200).setPadding(10).setFontFamily($this->f->publicFontFamily->value);
		$style .= setFont($this->f->publicFontSizeText->value,'normal','normal').colorBackground($this->f->publicFillColor->value);
		$div = new _div();
		$div->setStyle($style);
		$x .= $div->open();

		$style = setPadding(10).colorBackground($this->f->publicSiteColor->value);
		$div = new _div();
		$div->setStyle($style);
		$x .= $div->open();
		

		$style = setPadding(10).widthPixels(75).setFloat('left');
		$style .= colorBackground($this->f->publicMenuColor->value).setFont($this->f->publicFontSizeMenu->value,'normal','normal');
		$div = new _div();
		$div->setStyle($style);
		$x .= $div->open();
		
		
		$style = clearListStyle().clearMarginPadding();
		$list = new _ul();
		$list->setStyle($style);
		$x .= $list->open();
		
		$style = setDisplay('block').colorText($this->f->publicTextColor->value);
		$li = new _li();
		$li->setStyle($style);
		$x .= $li->wrap('Menu Item');
	
		$style = setDisplay('block').colorText($this->f->publicTextColorHover->value);
		$style .= colorBackground($this->f->publicMenuColorHover->value);
		$li = new _li();
		$li->setStyle($style);
		$x .= $li->wrap('Menu Item');
	
		$x .= closeList();
		$x .= closeDiv();
	
		$style = setPadding(10).setMarginCustom('left',100);
		$style .= colorBackground($this->f->publicPageColor->value).colorText($this->f->publicTextColor->value);
		$div = new _div();
		$div->setStyle($style);
		$x .= $div->open();
		
		$x .= spanStyled('Titles',setFont($this->f->publicFontSizeTitle->value,'normal','bold')).br();
		$x .= spanStyled('Headings',setFont($this->f->publicFontSizeHeading->value,'normal','bold')).br();
		$x .= spanStyled('Content Text'.br().'...',setFont($this->f->publicFontSizeText->value,'normal','normal')).br();
		$x .= closeDiv();		
		$x .= closeDiv();		
		$x .= closeDiv();

		return $x;		
	}
	
	protected function editForm(){
		if ($this->pageMode == 'ADD'){		
			//$this->setDefaults();
			$legend = 'Add Site Settings';
		} else {
			$legend = 'Edit Site Settings';	
		}

		$entity = 'site-settings';
		$c = new ProjectLinks;
		$contextMenu = $c->formatToggleLink('formOptional','+Options');


		$form = openEditForm($entity,$legend,'sys_SiteSettings_Save.php',$contextMenu);
		
		//start required fields
		$fields = inputFieldName($entity,$this->f->siteTitle->value,'siteTitle','Projects Title');

		$fields .= inputFieldText($entity,$this->f->siteUrl->value,'siteUrl','Projects URL',50,255);
				
		$fields .= inputFieldName($entity,$this->f->contactName->value,'contactName','Contact Name');

		$fields .= inputFieldText($entity,$this->f->contactEmail->value,'contactEmail','Contact Email',40,100);

		//end required fields
		$formRequired = $fields;

		//start optional fields		
		$fields = inputFieldName($entity,$this->f->organization->value,'organization','Organization');

		$fields .= inputFieldText($entity,$this->f->organizationUrl->value,'organizationUrl','Organization URL',50,255);

		$fields .= inputFieldComments($entity,$this->f->organizationDescription->value,'organizationDescription','Organization Description');


		$input = getSelectYesNo('showCostReports',$this->f->showCostReports->value);
		$fields .= captionedInput('Show Cost Reports',$input);		

		$input = getSelectYesNo('showRevenueReports',$this->f->showRevenueReports->value);
		$fields .= captionedInput('Show Revenue Reports',$input);		

		$input = getSelectYesNo('showPublicSite',$this->f->showPublicSite);
		$fields .= captionedInput('Show Public Site',$input);				
		
		$fields .= $this->getPublicSiteStylesFieldset('false');

		$fields .= inputFieldComments($entity,$this->f->loginNotice->value,'loginNotice','Projects Login Notice',1000);


		//end optional fields (hidden by default)
		$formOptional = $fields;

		
		$hidden = getHiddenInput('mode', $this->pageMode);
		
		$input = getSaveChangesResetButtons();
		$formSubmit = $hidden.$input;
		
		$form .= closeEditForm($entity,$formRequired,$formOptional,$formSubmit);
		return $form;
	}
	
	protected function afterCollectPostValues(){
	
	}
	
	private function createSettings(){

		
			$sql = " INSERT INTO sitewide_settings ";
			$sql .= " (site_title, ";
			$sql .= " organization, ";
			$sql .= " organization_description, ";
			$sql .= " site_url, ";
			$sql .= " contact_name, ";
			$sql .= " contact_email, ";
			$sql .= " public_fill_color, ";
			$sql .= " public_site_color, ";
			$sql .= " public_page_color, ";
			$sql .= " public_menu_color, ";
			$sql .= " public_menu_color_hover, ";
			$sql .= " public_text_color, ";
			$sql .= " public_text_color_hover, ";
			$sql .= " public_font_family, ";
			$sql .= " public_font_size_title, ";
			$sql .= " public_font_size_heading, ";
			$sql .= " public_font_size_menu, ";
			$sql .= " public_font_size_text, ";
			$sql .= " show_public_site, ";
			$sql .= " show_cost_reports, ";
			$sql .= " show_revenue_reports ";
			$sql .= " ) ";
			$sql .= " VALUES (";
			$sql .= " '".$this->f->siteTitle."', ";
			$sql .= " '".$this->f->organization."', ";
			$sql .= " '".$this->f->organizationDescription."', ";
			$sql .= " '".$this->f->siteUrl."', ";
			$sql .= " '".$this->f->contactName."', ";
			$sql .= " '".$this->f->contactEmail."', ";
			$sql .= " '".$this->f->publicFillColor."', ";
			$sql .= " '".$this->f->publicSiteColor."', ";
			$sql .= " '".$this->f->publicPageColor."', ";
			$sql .= " '".$this->f->publicMenuColor."', ";
			$sql .= " '".$this->f->publicMenuColorHover."', ";
			$sql .= " '".$this->f->publicTextColor."', ";
			$sql .= " '".$this->f->publicTextColorHover."', ";
			$sql .= " '".$this->f->publicFontFamily."', ";			
			$sql .= " ".$this->f->publicFontSizeTitle.", ";
			$sql .= " ".$this->f->publicFontSizeHeading.", ";
			$sql .= " ".$this->f->publicFontSizeMenu.", ";
			$sql .= " ".$this->f->publicFontSizeText.", ";			
			$sql .= " '".$this->f->showPublicSite."', ";			
			$sql .= " '".$this->f->showCostReports."', ";			
			$sql .= " '".$this->f->showRevenueReports."' ";			
			$sql .= " ) ";
			
		$result = dbRunSQL($sql);

	}


	protected function saveUpdate(){
			

			$sql = " UPDATE sitewide_settings AS sw ";
			$sql .= " SET ";
			$sql .= " sw.site_title = '".$this->f->siteTitle."', ";
			$sql .= " sw.site_url = '".$this->f->siteUrl."', ";
			$sql .= " sw.login_notice = '".$this->f->loginNotice."', ";
			$sql .= " sw.organization = '".$this->f->organization."', ";
			$sql .= " sw.organization_url = '".$this->f->organizationUrl."', ";
			$sql .= " sw.organization_description = '".$this->f->organizationDescription."', ";
			$sql .= " sw.contact_name = '".$this->f->contactName."', ";
			$sql .= " sw.contact_email = '".$this->f->contactEmail."', ";
			$sql .= " sw.public_fill_color = '".$this->f->publicFillColor."', ";
			$sql .= " sw.public_site_color = '".$this->f->publicSiteColor."', ";
			$sql .= " sw.public_page_color = '".$this->f->publicPageColor."', ";
			$sql .= " sw.public_menu_color = '".$this->f->publicMenuColor."', ";
			$sql .= " sw.public_menu_color_hover = '".$this->f->publicMenuColorHover."', ";
			$sql .= " sw.public_text_color = '".$this->f->publicTextColor."', ";
			$sql .= " sw.public_text_color_hover = '".$this->f->publicTextColorHover."', ";
			$sql .= " sw.public_font_family = '".$this->f->publicFontFamily."', ";			
			$sql .= " sw.public_font_size_title = ".$this->f->publicFontSizeTitle.", ";			
			$sql .= " sw.public_font_size_heading = ".$this->f->publicFontSizeHeading.", ";			
			$sql .= " sw.public_font_size_menu = ".$this->f->publicFontSizeMenu.", ";			
			$sql .= " sw.public_font_size_text = ".$this->f->publicFontSizeText.", ";			
			$sql .= " sw.show_public_site = '".$this->f->showPublicSite."', ";
			$sql .= " sw.show_cost_reports = '".$this->f->showCostReports."', ";
			$sql .= " sw.show_revenue_reports = '".$this->f->showRevenueReports."' ";

			$result = dbRunSQL($sql);
		
			$this->f->setSessionDetails();
		
	
	}
	
}
?>
