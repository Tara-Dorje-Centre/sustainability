<?php

namespace application;

class link extends \html\_href{
	public function __construct(url $u, string $display,string $css = 'display-link', $onClickJs = null){
		parent::__construct($u->print(), $display, $css);
		$this->setOnClickScript($onClickJS);
	}

}

class urlParameter{
	protected const EQUALS = '=';
	protected const QUESTION = '?';
	protected const AMPERSAND = '&';
	public $name;
	private $value;
	public function __construct(string $name, string $value){
		$this->set($name,$value);
	}
	public function set(string $name, string $value){
		$this->name = $name;
		$this->value = $value;
	}
	public function print(bool $first = false){
		if ($first == true){
			$connect = self::QUESTION;
			//'?';
		} else {
			$connect = self::AMPERSAND;
			//'&';
		}
		$p = $connect.$name.self::EQUALS.$value;
		return $p;
	}
}
class url {
	protected $urlBase = 'index.php'; 
	protected $urlArgs = '';
	protected $parameters = array();
	public function __construct(string $base){
		$this->urlBase = $base;

	}
	public function getBase(){
		return $this->urlBase;
	}
	public function print(){
		$this->makeParameters();
		$url = $this->urlBase.$this->urlArgs;
		return $url;
	}
	public function link($caption){
		$l = new html\link($this->print(),$caption);
	}
	public function addParameter(_urlParameter $p){
		$this->parameters[$p->name] = $p;
	}
	public function removeParameter(string $name){
		unset($this->parameters[$name]);
	}
	public function makeParameter(string $name, string $value){
		$p = new _urlParameter($name,$value);
		$this->addParameter($p);
	}
	public function makeParameters(){
		$this->urlArgs = '';
		$first = true;
		foreach ($this->parameters as $p){
			$this->urlArgs .= $p->print($first);
			if ($first == true){
				$first = false;
			}
		}
	}
}
?>
