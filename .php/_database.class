<?php 
class _database extends mysqli{
	
protected const _server = "127.0.0.1";
protected const _database  = "projects_dev";
protected const _user = "dev_usr";
protected const _pwd = "dev_pwd";
protected const _port = 3306;

private $echo;

public function __construct(){

	$this->echo = new _echo();
	$this->echo->echoPrint(false, 'creating connection', '__construct', '_Database', '');

	parent::__construct($this::_server, $this::_user, $this::_pwd, $this::_database, $this::_port);

	if ($this->connect_error) {
		$msg = 'Connect Error ['.$this->connect_errno.'] ';
		$msg .= $this->connect_error;
    	exit($msg);
	} 
}

//overload close method
public function close(){

	$this->echo->echoPrint(true, ' --releasing connection', 'close');
	parent::close();
}

public function query($sql){

	$this->echo->echoValue(true, 'sql', $sql, 'query');

	return parent::query($sql);
}

}
?>
